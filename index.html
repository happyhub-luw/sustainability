<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MzansiWaste – Turning Waste into Opportunities</title>

    <!-- React and ReactDOM (via CDN) -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- TailwindCSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Lucide Icons CDN -->
    <script src="https://unpkg.com/lucide@latest"></script>
  </head>

  <body class="bg-gradient-to-br from-green-50 via-blue-50 to-teal-50">
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect } = React;

      const MzansiWaste = () => {
        const [activeTab, setActiveTab] = useState('marketplace');
        const [selectedCategory, setSelectedCategory] = useState('all');
        const [showPostModal, setShowPostModal] = useState(false);

        const categories = [
          { id: 'all', name: 'All', icon: 'package' },
          { id: 'plastic', name: 'Plastic', icon: 'recycle' },
          { id: 'organic', name: 'Organic', icon: 'leaf' },
          { id: 'electronic', name: 'E-Waste', icon: 'trending-up' },
          { id: 'metal', name: 'Metal', icon: 'award' },
        ];

        const listings = [
          {
            id: 1,
            title: 'Clean PET Bottles - 500kg',
            category: 'plastic',
            location: 'Cape Town, Western Cape',
            type: 'offer',
            quantity: '500kg',
            price: 'R2000',
            poster: 'GreenCycle Solutions',
            image: '🏭',
            description: 'Baled clean PET bottles ready for collection',
          },
          {
            id: 2,
            title: 'Need Wood Pallets for Community Garden',
            category: 'organic',
            location: 'Soweto, Gauteng',
            type: 'request',
            quantity: '20 pallets',
            price: 'Free Collection',
            poster: 'Soweto Urban Farmers',
            image: '🌱',
            description: 'Building raised beds for food security project',
          },
          {
            id: 3,
            title: 'Old Computers & Laptops',
            category: 'electronic',
            location: 'Durban, KZN',
            type: 'offer',
            quantity: '50+ units',
            price: 'R50/unit',
            poster: 'TechRecycle KZN',
            image: '💻',
            description: 'Refurbishable electronics from office upgrade',
          },
          {
            id: 4,
            title: 'Scrap Copper & Brass',
            category: 'metal',
            location: 'Johannesburg, Gauteng',
            type: 'offer',
            quantity: '200kg',
            price: 'Best offer',
            poster: 'Metro Scrap Traders',
            image: '⚙️',
            description: 'Mixed copper and brass from construction site',
          },
          {
            id: 5,
            title: 'Cardboard for Art Project',
            category: 'plastic',
            location: 'Stellenbosch, Western Cape',
            type: 'request',
            quantity: '100kg',
            price: 'Free',
            poster: 'Stellenbosch Art Collective',
            image: '🎨',
            description: 'Need cardboard for community mural project',
          },
          {
            id: 6,
            title: 'Cooking Oil for Biofuel',
            category: 'organic',
            location: 'Port Elizabeth, Eastern Cape',
            type: 'request',
            quantity: 'Any amount',
            price: 'R5/liter',
            poster: 'PE Green Energy',
            image: '⛽',
            description: 'Converting used cooking oil to biodiesel',
          },
        ];

        const impactStats = {
          wasteRedirected: '1,247',
          co2Saved: '3,891',
          jobsCreated: '156',
          communities: '89',
        };

        const successStories = [
          {
            id: 1,
            title: 'Plastic Bottles → School Furniture',
            location: 'Khayelitsha, Cape Town',
            impact: '2000kg plastic diverted',
            story: 'Local school received 50 desks made from recycled plastic bottles',
          },
          {
            id: 2,
            title: 'Food Waste → Community Compost',
            location: 'Alexandra, Johannesburg',
            impact: '500kg weekly organic waste',
            story: 'Township garden cooperative producing organic vegetables',
          },
          {
            id: 3,
            title: 'E-Waste → Digital Literacy',
            location: 'Mthatha, Eastern Cape',
            impact: '200 computers refurbished',
            story: 'Youth center providing free computer training',
          },
        ];

        const filteredListings =
          selectedCategory === 'all'
            ? listings
            : listings.filter((l) => l.category === selectedCategory);

        // Render icons from Lucide
        const Icon = ({ name, size = 20, className = '' }) => {
          return <i data-lucide={name} className={className} style={{ width: size, height: size }}></i>;
        };

        useEffect(() => {
          lucide.createIcons();
        }, [activeTab, selectedCategory, showPostModal]);

        return (
          <div className="min-h-screen">
            {/* Header */}
            <header className="bg-white shadow-md sticky top-0 z-50">
              <div className="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
                <div className="flex items-center gap-3">
                  <div className="bg-gradient-to-br from-green-500 to-teal-600 p-2 rounded-xl">
                    <Icon name="recycle" className="text-white" size={32} />
                  </div>
                  <div>
                    <h1 className="text-2xl font-bold text-gray-800">MzansiWaste</h1>
                    <p className="text-sm text-gray-600">Turning Waste into Opportunities</p>
                  </div>
                </div>
                <button
                  onClick={() => setShowPostModal(true)}
                  className="bg-gradient-to-r from-green-500 to-teal-600 text-white px-6 py-2 rounded-lg flex items-center gap-2 hover:shadow-lg transition-all"
                >
                  <Icon name="plus" />
                  Post Listing
                </button>
              </div>
            </header>

            {/* Impact Stats */}
            <div className="max-w-7xl mx-auto px-4 py-6 grid grid-cols-2 md:grid-cols-4 gap-4">
              <div className="bg-white rounded-xl p-4 shadow-md">
                <div className="text-green-600 font-bold text-2xl">{impactStats.wasteRedirected}t</div>
                <div className="text-gray-600 text-sm">Waste Redirected</div>
              </div>
              <div className="bg-white rounded-xl p-4 shadow-md">
                <div className="text-blue-600 font-bold text-2xl">{impactStats.co2Saved}kg</div>
                <div className="text-gray-600 text-sm">CO₂ Saved</div>
              </div>
              <div className="bg-white rounded-xl p-4 shadow-md">
                <div className="text-teal-600 font-bold text-2xl">{impactStats.jobsCreated}</div>
                <div className="text-gray-600 text-sm">Jobs Created</div>
              </div>
              <div className="bg-white rounded-xl p-4 shadow-md">
                <div className="text-purple-600 font-bold text-2xl">{impactStats.communities}</div>
                <div className="text-gray-600 text-sm">Communities</div>
              </div>
            </div>

            {/* Tabs */}
            <div className="max-w-7xl mx-auto px-4">
              <div className="flex gap-2 border-b border-gray-200 bg-white rounded-t-xl p-2">
                {[
                  { id: 'marketplace', name: 'Marketplace', icon: 'package' },
                  { id: 'stories', name: 'Success Stories', icon: 'heart' },
                  { id: 'map', name: 'Collection Points', icon: 'map-pin' },
                ].map((tab) => (
                  <button
                    key={tab.id}
                    onClick={() => setActiveTab(tab.id)}
                    className={`px-6 py-3 rounded-lg flex items-center gap-2 transition-all ${
                      activeTab === tab.id
                        ? 'bg-gradient-to-r from-green-500 to-teal-600 text-white shadow-md'
                        : 'text-gray-600 hover:bg-gray-100'
                    }`}
                  >
                    <Icon name={tab.icon} />
                    {tab.name}
                  </button>
                ))}
              </div>
            </div>

            {/* Marketplace / Stories / Map */}
            <div className="max-w-7xl mx-auto px-4 pb-8 bg-white rounded-b-xl shadow-lg p-6 mt-2">
              {activeTab === 'marketplace' && (
                <div>
                  <div className="mb-6">
                    <div className="flex items-center gap-2 mb-4">
                      <Icon name="filter" className="text-gray-600" />
                      <span className="font-semibold text-gray-700">Filter by Category:</span>
                    </div>
                    <div className="flex flex-wrap gap-2">
                      {categories.map((cat) => (
                        <button
                          key={cat.id}
                          onClick={() => setSelectedCategory(cat.id)}
                          className={`px-4 py-2 rounded-lg flex items-center gap-2 transition-all ${
                            selectedCategory === cat.id
                              ? 'bg-gradient-to-r from-green-500 to-teal-600 text-white shadow-md'
                              : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                          }`}
                        >
                          <Icon name={cat.icon} />
                          {cat.name}
                        </button>
                      ))}
                    </div>
                  </div>
                  <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    {filteredListings.map((listing) => (
                      <div
                        key={listing.id}
                        className="bg-gradient-to-br from-white to-gray-50 rounded-xl p-5 shadow-md hover:shadow-xl transition-all border border-gray-200"
                      >
                        <div className="flex items-start justify-between mb-3">
                          <div className="text-4xl">{listing.image}</div>
                          <span
                            className={`px-3 py-1 rounded-full text-xs font-semibold ${
                              listing.type === 'offer'
                                ? 'bg-green-100 text-green-700'
                                : 'bg-blue-100 text-blue-700'
                            }`}
                          >
                            {listing.type === 'offer' ? 'Available' : 'Needed'}
                          </span>
                        </div>
                        <h3 className="font-bold text-lg text-gray-800 mb-2">{listing.title}</h3>
                        <p className="text-gray-600 text-sm mb-3">{listing.description}</p>
                        <div className="space-y-2 mb-4 text-sm text-gray-600">
                          <div className="flex items-center gap-2">
                            <Icon name="map-pin" className="text-green-600" />
                            {listing.location}
                          </div>
                          <div className="flex items-center gap-2">
                            <Icon name="package" className="text-blue-600" />
                            Quantity: {listing.quantity}
                          </div>
                          <div className="flex items-center gap-2">
                            <Icon name="trending-up" className="text-teal-600" />
                            <span className="font-semibold text-teal-700">{listing.price}</span>
                          </div>
                        </div>
                        <div className="flex items-center justify-between pt-3 border-t border-gray-200">
                          <span className="text-xs text-gray-500">by {listing.poster}</span>
                          <button className="bg-gradient-to-r from-green-500 to-teal-600 text-white px-4 py-2 rounded-lg text-sm hover:shadow-md transition-all">
                            Connect
                          </button>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
              )}

              {activeTab === 'stories' && (
                <div className="space-y-6">
                  <h2 className="text-2xl font-bold text-gray-800 mb-4">Success Stories from Across SA</h2>
                  {successStories.map((story) => (
                    <div
                      key={story.id}
                      className="bg-gradient-to-r from-green-50 to-teal-50 rounded-xl p-6 border-l-4 border-green-500 hover:shadow-lg transition-shadow"
                    >
                      <div className="flex items-start gap-4">
                        <div className="bg-green-500 text-white p-3 rounded-full">
                          <Icon name="award" size={24} />
                        </div>
                        <div className="flex-1">
                          <h3 className="font-bold text-xl text-gray-800 mb-2">{story.title}</h3>
                          <div className="flex items-center gap-2 text-sm text-gray-600 mb-3">
                            <Icon name="map-pin" />
                            {story.location}
                          </div>
                          <p className="text-gray-700 mb-3">{story.story}</p>
                          <div className="inline-block bg-white px-4 py-2 rounded-lg shadow-sm">
                            <span className="text-green-700 font-semibold text-sm">Impact: {story.impact}</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  ))}
                </div>
              )}

              {activeTab === 'map' && (
                <div>
                  <h2 className="text-2xl font-bold text-gray-800 mb-4">Collection Points & Recycling Centers</h2>
                  <div className="bg-gradient-to-br from-blue-50 to-teal-50 rounded-xl p-8 text-center">
                    <Icon name="map-pin" size={64} className="mx-auto text-teal-600 mb-4" />
                    <h3 className="text-xl font-bold text-gray-800 mb-2">Interactive Map Coming Soon</h3>
                    <p className="text-gray-600 mb-6">
                      Find nearby collection points, recycling centers, and community projects
                    </p>
                  </div>
                </div>
              )}
            </div>

            {/* Post Listing Modal */}
            {showPostModal && (
              <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                <div className="bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl">
                  <h3 className="text-2xl font-bold text-gray-800 mb-4">Create New Listing</h3>
                  <div className="space-y-4">
                    <input type="text" placeholder="Listing Title" className="w-full px-4 py-2 border rounded-lg" />
                    <input type="text" placeholder="Location" className="w-full px-4 py-2 border rounded-lg" />
                    <div className="flex gap-3 pt-4">
                      <button
                        onClick={() => setShowPostModal(false)}
                        className="flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50"
                      >
                        Cancel
                      </button>
                      <button
                        onClick={() => setShowPostModal(false)}
                        className="flex-1 px-4 py-2 bg-gradient-to-r from-green-500 to-teal-600 text-white rounded-lg hover:shadow-lg transition-all"
                      >
                        Post Listing
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            )}
          </div>
        );
      };

      ReactDOM.createRoot(document.getElementById('root')).render(<MzansiWaste />);
    </script>
  </body>
</html>
